var EasyStar=EasyStar||{};EasyStar.Node=function(t,e,r,i,n){this.parent=t,this.x=e,this.y=r,this.costSoFar=i,this.simpleDistanceToTarget=n,this.bestGuessDistance=function(){return this.costSoFar+this.simpleDistanceToTarget}},EasyStar.Node.OPEN_LIST=0,EasyStar.Node.CLOSED_LIST=1,EasyStar.PriorityQueue=function(t,e){this.length=0;var r=[],i=!1;if(e==EasyStar.PriorityQueue.MAX_HEAP)i=!0;else{if(e!=EasyStar.PriorityQueue.MIN_HEAP)throw e+" not supported.";i=!1}this.insert=function(e){if(!e.hasOwnProperty(t))throw"Cannot insert "+e+" because it does not have a property by the name of "+t+".";r.push(e),this.length++,n(this.length-1)},this.getHighestPriorityElement=function(){return r[0]},this.shiftHighestPriorityElement=function(){if(0===this.length)throw"There are no more elements in your priority queue.";if(1===this.length){var t=r[0];return r=[],this.length=0,t}var e=r[0],i=r.pop();return this.length--,r[0]=i,a(0),e};var n=function(t){if(0!==t){var e=u(t);s(t,e)&&(o(t,e),n(e))}},a=function(t){if(left=l(t),right=h(t),s(left,t))o(t,left),a(left);else if(s(right,t))o(t,right),a(right);else{if(0==t)return;a(0)}},o=function(t,e){var i=r[t];r[t]=r[e],r[e]=i},s=function(e,n){return void 0===r[n]||void 0===r[e]?!1:("function"==typeof r[e][t]?(selfValue=r[e][t](),targetValue=r[n][t]()):(selfValue=r[e][t],targetValue=r[n][t]),i?selfValue>targetValue?!0:!1:targetValue>selfValue?!0:!1)},u=function(t){return Math.floor(t/2)-1},l=function(t){return 2*t+1},h=function(t){return 2*t+2}},EasyStar.PriorityQueue.MAX_HEAP=0,EasyStar.PriorityQueue.MIN_HEAP=1,EasyStar.js=function(t,e){var r,i,n,a,o,s,u,l=10,h=!0,f={},c={},y=Number.MAX_VALUE;this.setGrid=function(t){r=t},this.setPath=function(i,f,y,g){if(u=new EasyStar.PriorityQueue("bestGuessDistance",EasyStar.PriorityQueue.MIN_HEAP),h=!0,c={},n=i,a=f,o=y,s=g,void 0===r)throw"You can't set a path without first calling setCollisionGrid on the EasyStar.js";if(0>n||0>a||0>o||0>o||n>r[0].length-1||a>r.length-1||o>r[0].length-1||s>r.length-1)throw"Your start or end point is outside the scope of your grid.";n===o&&a===s&&e([]);for(var E=r[s][o],S=!1,d=0;t.length>d;d++)if(E===t[d]){S=!0;break}return S===!1?(e(null),void 0):(h=!1,u.insert(v(n,a,null,l)),void 0)},this.calculate=function(){if(void 0!==r&&h!==!0)for(i=0;y>i;){if(0===u.length)return e(null),h=!0,void 0;var t=u.shiftHighestPriorityElement();if(t.list=EasyStar.Node.CLOSED_LIST,t.y>0&&(g(t,0,-1,l),h===!0))return;if(t.x<r[0].length-1&&(g(t,1,0,l),h===!0))return;if(t.y<r.length-1&&(g(t,0,1,l),h===!0))return;if(t.x>0&&(g(t,-1,0,l),h===!0))return;i++}},this.setIterationsPerCalculation=function(t){y=t},this.setAcceptableTiles=function(e){t=e},this.avoidAdditionalPoint=function(t,e){f[t+"_"+e]=1};var g=function(i,n,a,l){var c=i.x+n,y=i.y+a;if(o===c&&s===y){h=!0;var g=[],E=0;g[E]={x:c,y:y},E++,g[E]={x:i.x,y:i.y},E++;for(var S=i.parent;null!=S;)g[E]={x:S.x,y:S.y},E++,S=S.parent;g.reverse(),e(g)}if(void 0===f[c+"_"+y])for(var d=0;t.length>d;d++)if(r[y][c]===t[d]){var P=v(c,y,i,l);void 0===P.list?(P.list=EasyStar.Node.OPEN_LIST,u.insert(P)):P.list===EasyStar.Node.OPEN_LIST&&i.costSoFar+l<P.costSoFar&&(P.costSoFar=i.costSoFar+l,P.parent=i);break}},v=function(t,e,r,i){if(void 0!==c[t+"_"+e])return c[t+"_"+e];var n=E(t,e,o,s);if(null!==r)var a=r.costSoFar+i;else a=n;var u=new EasyStar.Node(r,t,e,a,n);return c[t+"_"+e]=u,u},E=function(t,e,r,i){return Math.floor(Math.abs(e-t)+Math.abs(i-r))}};