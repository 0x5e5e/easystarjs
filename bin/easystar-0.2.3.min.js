(function(){var t,n,e,o,i,r,s,a,u,c,l,h,p,f,d;e=Math.floor,c=Math.min,n=function(t,n){return n>t?-1:t>n?1:0},u=function(t,o,i,r,s){var a;if(null==i&&(i=0),null==s&&(s=n),0>i)throw new Error("lo must be non-negative");for(null==r&&(r=t.length);r>i;)a=e((i+r)/2),s(o,t[a])<0?r=a:i=a+1;return[].splice.apply(t,[i,i-i].concat(o)),o},r=function(t,e,o){return null==o&&(o=n),t.push(e),f(t,0,t.length-1,o)},i=function(t,e){var o,i;return null==e&&(e=n),o=t.pop(),t.length?(i=t[0],t[0]=o,d(t,0,e)):i=o,i},a=function(t,e,o){var i;return null==o&&(o=n),i=t[0],t[0]=e,d(t,0,o),i},s=function(t,e,o){var i;return null==o&&(o=n),t.length&&o(t[0],e)<0&&(i=[t[0],e],e=i[0],t[0]=i[1],d(t,0,o)),e},o=function(t,o){var i,r,s,a,u,c;for(null==o&&(o=n),a=function(){c=[];for(var n=0,o=e(t.length/2);o>=0?o>n:n>o;o>=0?n++:n--)c.push(n);return c}.apply(this).reverse(),u=[],r=0,s=a.length;s>r;r++)i=a[r],u.push(d(t,i,o));return u},p=function(t,e,o){var i;return null==o&&(o=n),i=t.indexOf(e),-1!==i?(f(t,0,i,o),d(t,i,o)):void 0},l=function(t,e,i){var r,a,u,c,l;if(null==i&&(i=n),a=t.slice(0,e),!a.length)return a;for(o(a,i),l=t.slice(e),u=0,c=l.length;c>u;u++)r=l[u],s(a,r,i);return a.sort(i).reverse()},h=function(t,e,r){var s,a,l,h,p,f,d,y,v,g;if(null==r&&(r=n),10*e<=t.length){if(h=t.slice(0,e).sort(r),!h.length)return h;for(l=h[h.length-1],y=t.slice(e),p=0,d=y.length;d>p;p++)s=y[p],r(s,l)<0&&(u(h,s,0,null,r),h.pop(),l=h[h.length-1]);return h}for(o(t,r),g=[],a=f=0,v=c(e,t.length);v>=0?v>f:f>v;a=v>=0?++f:--f)g.push(i(t,r));return g},f=function(t,e,o,i){var r,s,a;for(null==i&&(i=n),r=t[o];o>e&&(a=o-1>>1,s=t[a],i(r,s)<0);)t[o]=s,o=a;return t[o]=r},d=function(t,e,o){var i,r,s,a,u;for(null==o&&(o=n),r=t.length,u=e,s=t[e],i=2*e+1;r>i;)a=i+1,r>a&&!(o(t[i],t[a])<0)&&(i=a),t[e]=t[i],e=i,i=2*e+1;return t[e]=s,f(t,u,e,o)},t=function(){function t(t){this.cmp=null!=t?t:n,this.nodes=[]}return t.push=r,t.pop=i,t.replace=a,t.pushpop=s,t.heapify=o,t.updateItem=p,t.nlargest=l,t.nsmallest=h,t.prototype.push=function(t){return r(this.nodes,t,this.cmp)},t.prototype.pop=function(){return i(this.nodes,this.cmp)},t.prototype.peek=function(){return this.nodes[0]},t.prototype.contains=function(t){return-1!==this.nodes.indexOf(t)},t.prototype.replace=function(t){return a(this.nodes,t,this.cmp)},t.prototype.pushpop=function(t){return s(this.nodes,t,this.cmp)},t.prototype.heapify=function(){return o(this.nodes,this.cmp)},t.prototype.updateItem=function(t){return p(this.nodes,t,this.cmp)},t.prototype.clear=function(){return this.nodes=[]},t.prototype.empty=function(){return 0===this.nodes.length},t.prototype.size=function(){return this.nodes.length},t.prototype.clone=function(){var n;return n=new t,n.nodes=this.nodes.slice(0),n},t.prototype.toArray=function(){return this.nodes.slice(0)},t.prototype.insert=t.prototype.push,t.prototype.top=t.prototype.peek,t.prototype.front=t.prototype.peek,t.prototype.has=t.prototype.contains,t.prototype.copy=t.prototype.clone,t}(),function(t,n){return"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?module.exports=n():t.Heap=n()}(this,function(){return t})}).call(this);var EasyStar=EasyStar||{};"function"==typeof define&&define.amd&&define("easystar",[],function(){return EasyStar}),"undefined"!=typeof module&&module.exports&&(module.exports=EasyStar),EasyStar.Node=function(t,n,e,o,i){this.parent=t,this.x=n,this.y=e,this.costSoFar=o,this.simpleDistanceToTarget=i,this.bestGuessDistance=function(){return this.costSoFar+this.simpleDistanceToTarget}},EasyStar.Node.OPEN_LIST=0,EasyStar.Node.CLOSED_LIST=1,EasyStar.instance=function(){this.isDoneCalculating=!0,this.pointsToAvoid={},this.startX,this.callback,this.startY,this.endX,this.endY,this.nodeHash={},this.openList},EasyStar.js=function(){var t,n,e,o=1,i=1.4,r=!1,s={},a={},u={},c=!0,l=[],h=Number.MAX_VALUE,p=!1;this.setAcceptableTiles=function(t){t instanceof Array?e=t:!isNaN(parseFloat(t))&&isFinite(t)&&(e=[t])},this.enableSync=function(){r=!0},this.disableSync=function(){r=!1},this.enableDiagonals=function(){p=!0},this.disableDiagonals=function(){p=!1},this.setGrid=function(n){t=n;for(var e=0;e<t.length;e++)for(var o=0;o<t[0].length;o++)a[t[e][o]]||(a[t[e][o]]=1)},this.setTileCost=function(t,n){a[t]=n},this.setAdditionalPointCost=function(t,n,e){u[t+"_"+n]=e},this.removeAdditionalPointCost=function(t,n){delete u[t+"_"+n]},this.removeAllAdditionalPointCosts=function(){u={}},this.setIterationsPerCalculation=function(t){h=t},this.avoidAdditionalPoint=function(t,n){s[t+"_"+n]=1},this.stopAvoidingAdditionalPoint=function(t,n){delete s[t+"_"+n]},this.enableCornerCutting=function(){c=!0},this.disableCornerCutting=function(){c=!1},this.stopAvoidingAllAdditionalPoints=function(){s={}},this.findPath=function(n,i,s,a,u){var c=function(t){r?u(t):setTimeout(function(){u(t)})};if(void 0===e)throw new Error("You can't set a path without first calling setAcceptableTiles() on EasyStar.");if(void 0===t)throw new Error("You can't set a path without first calling setGrid() on EasyStar.");if(0>n||0>i||0>s||0>a||n>t[0].length-1||i>t.length-1||s>t[0].length-1||a>t.length-1)throw new Error("Your start or end point is outside the scope of your grid.");if(n===s&&i===a)return c([]),void 0;for(var h=t[a][s],p=!1,f=0;f<e.length;f++)if(h===e[f]){p=!0;break}if(p===!1)return c(null),void 0;var d=new EasyStar.instance;d.openList=new Heap(function(t,n){return t.bestGuessDistance()-n.bestGuessDistance()}),d.isDoneCalculating=!1,d.nodeHash={},d.startX=n,d.startY=i,d.endX=s,d.endY=a,d.callback=c,d.openList.push(v(d,d.startX,d.startY,null,o)),l.push(d)},this.calculate=function(){if(0!==l.length&&void 0!==t&&void 0!==e)for(n=0;h>n;n++){if(0===l.length)return;if(r&&(n=0),0!==l[0].openList.size()){var s=l[0].openList.pop(),a=[];s.list=EasyStar.Node.CLOSED_LIST,s.y>0&&a.push({instance:l[0],searchNode:s,x:0,y:-1,cost:o*y(s.x,s.y-1)}),s.x<t[0].length-1&&a.push({instance:l[0],searchNode:s,x:1,y:0,cost:o*y(s.x+1,s.y)}),s.y<t.length-1&&a.push({instance:l[0],searchNode:s,x:0,y:1,cost:o*y(s.x,s.y+1)}),s.x>0&&a.push({instance:l[0],searchNode:s,x:-1,y:0,cost:o*y(s.x-1,s.y)}),p&&(s.x>0&&s.y>0&&(c||d(t,e,s.x,s.y-1)&&d(t,e,s.x-1,s.y))&&a.push({instance:l[0],searchNode:s,x:-1,y:-1,cost:i*y(s.x-1,s.y-1)}),s.x<t[0].length-1&&s.y<t.length-1&&(c||d(t,e,s.x,s.y+1)&&d(t,e,s.x+1,s.y))&&a.push({instance:l[0],searchNode:s,x:1,y:1,cost:i*y(s.x+1,s.y+1)}),s.x<t[0].length-1&&s.y>0&&(c||d(t,e,s.x,s.y-1)&&d(t,e,s.x+1,s.y))&&a.push({instance:l[0],searchNode:s,x:1,y:-1,cost:i*y(s.x+1,s.y-1)}),s.x>0&&s.y<t.length-1&&(c||d(t,e,s.x,s.y+1)&&d(t,e,s.x-1,s.y))&&a.push({instance:l[0],searchNode:s,x:-1,y:1,cost:i*y(s.x-1,s.y+1)})),a.sort(function(t,n){var e=t.cost+g(s.x+t.x,s.y+t.y,l[0].endX,l[0].endY),o=n.cost+g(s.x+n.x,s.y+n.y,l[0].endX,l[0].endY);return o>e?-1:e===o?0:1});for(var u=!1,v=0;v<a.length;v++)if(f(a[v].instance,a[v].searchNode,a[v].x,a[v].y,a[v].cost),a[v].instance.isDoneCalculating===!0){u=!0;break}u&&l.shift()}else{var x=l[0];x.callback(null),l.shift()}}};var f=function(n,o,i,r,a){var u=o.x+i,c=o.y+r;if(void 0===s[u+"_"+c]){if(n.endX===u&&n.endY===c){n.isDoneCalculating=!0;var l=[],h=0;l[h]={x:u,y:c},h++,l[h]={x:o.x,y:o.y},h++;for(var p=o.parent;null!=p;)l[h]={x:p.x,y:p.y},h++,p=p.parent;l.reverse();var f=n,y=l;return f.callback(y),void 0}if(d(t,e,u,c)){var g=v(n,u,c,o,a);void 0===g.list?(g.list=EasyStar.Node.OPEN_LIST,n.openList.push(g)):o.costSoFar+a<g.costSoFar&&(g.costSoFar=o.costSoFar+a,n.openList.updateItem(g))}}},d=function(t,n,e,o){for(var i=0;i<n.length;i++)if(t[o][e]===n[i])return!0;return!1},y=function(n,e){return u[n+"_"+e]||a[t[e][n]]},v=function(t,n,e,o,i){if(void 0!==t.nodeHash[n+"_"+e])return t.nodeHash[n+"_"+e];var r=g(n,e,t.endX,t.endY);if(null!==o)var s=o.costSoFar+i;else s=r;var a=new EasyStar.Node(o,n,e,s,r);return t.nodeHash[n+"_"+e]=a,a},g=function(t,n,e,o){if(p){var r=Math.abs(t-e),s=Math.abs(n-o);return s>r?i*r+s:i*s+r}var r=Math.abs(t-e),s=Math.abs(n-o);return r+s}};