var EasyStar=EasyStar||{};EasyStar.Node=function(a,b,c,d,e){this.parent=a,this.x=b,this.y=c,this.costSoFar=d,this.simpleDistanceToTarget=e,this.bestGuessDistance=function(){return this.costSoFar+this.simpleDistanceToTarget}},EasyStar.Node.OPEN_LIST=0,EasyStar.Node.CLOSED_LIST=1,EasyStar.PriorityQueue=function(a,b){this.length=0;var c=[],d=!1;if(b==EasyStar.PriorityQueue.MAX_HEAP)d=!0;else{if(b!=EasyStar.PriorityQueue.MIN_HEAP)throw b+" not supported.";d=!1}this.insert=function(b){if(!b.hasOwnProperty(a))throw"Cannot insert "+b+" because it does not have a property by the name of "+a+".";c.push(b),this.length++,e(this.length-1)},this.getHighestPriorityElement=function(){return c[0]},this.shiftHighestPriorityElement=function(){if(0===this.length)throw"There are no more elements in your priority queue.";if(1===this.length){var a=c[0];return c=[],this.length=0,a}var b=c[0],d=c.pop();return this.length--,c[0]=d,f(0),b};var e=function(a){if(0!==a){var b=i(a);h(a,b)&&(g(a,b),e(b))}},f=function(a){if(left=j(a),right=k(a),h(left,a))g(a,left),f(left);else if(h(right,a))g(a,right),f(right);else{if(0==a)return;f(0)}},g=function(a,b){var d=c[a];c[a]=c[b],c[b]=d},h=function(b,e){return void 0===c[e]||void 0===c[b]?!1:("function"==typeof c[b][a]?(selfValue=c[b][a](),targetValue=c[e][a]()):(selfValue=c[b][a],targetValue=c[e][a]),d?selfValue>targetValue?!0:!1:targetValue>selfValue?!0:!1)},i=function(a){return Math.floor(a/2)-1},j=function(a){return 2*a+1},k=function(a){return 2*a+2}},EasyStar.PriorityQueue.MAX_HEAP=0,EasyStar.PriorityQueue.MIN_HEAP=1,EasyStar.instance=function(){this.isDoneCalculating=!0,this.pointsToAvoid={},this.startX,this.callback,this.startY,this.endX,this.endY,this.nodeHash={},this.openList},EasyStar.js=function(){var a,b,c,d=10,e={},f=[],g=Number.MAX_VALUE;this.setAcceptableTiles=function(a){c=a},this.setGrid=function(b){a=b},this.setIterationsPerCalculation=function(a){g=a},this.avoidAdditionalPoint=function(a,b){e[a+"_"+b]=1},this.stopAvoidingAdditionalPoint=function(a,b){delete e[a+"_"+b]},this.stopAvoidingAllAdditionalPoints=function(){e={}},this.findPath=function(b,e,g,h,j){if(void 0===c)throw"You can't set a path without first calling setAcceptableTiles() on EasyStar.";if(void 0===a)throw"You can't set a path without first calling setGrid() on EasyStar.";if(0>b||0>e||0>g||0>g||b>a[0].length-1||e>a.length-1||g>a[0].length-1||h>a.length-1)throw"Your start or end point is outside the scope of your grid.";b===g&&e===h&&j([]);for(var k=a[h][g],l=!1,m=0;m<c.length;m++)if(k===c[m]){l=!0;break}if(l===!1)return j(null),void 0;var n=new EasyStar.instance;n.openList=new EasyStar.PriorityQueue("bestGuessDistance",EasyStar.PriorityQueue.MIN_HEAP),n.isDoneCalculating=!1,n.nodeHash={},n.startX=b,n.startY=e,n.endX=g,n.endY=h,n.callback=j,n.openList.insert(i(n,n.startX,n.startY,null,d)),f.push(n)},this.calculate=function(){if(0!==f.length&&void 0!==a&&void 0!==c)for(b=0;g>b;b++){if(0===f.length)return;if(0!==f[0].openList.length){var e=f[0].openList.shiftHighestPriorityElement();e.list=EasyStar.Node.CLOSED_LIST,e.y>0&&(h(f[0],e,0,-1,d),f[0].isDoneCalculating===!0)?f.shift():e.x<a[0].length-1&&(h(f[0],e,1,0,d),f[0].isDoneCalculating===!0)?f.shift():e.y<a.length-1&&(h(f[0],e,0,1,d),f[0].isDoneCalculating===!0)?f.shift():e.x>0&&(h(f[0],e,-1,0,d),f[0].isDoneCalculating===!0)&&f.shift()}else f[0].callback(null),f.shift()}};var h=function(b,d,f,g,h){var j=d.x+f,k=d.y+g;if(b.endX===j&&b.endY===k){b.isDoneCalculating=!0;var l=[],m=0;l[m]={x:j,y:k},m++,l[m]={x:d.x,y:d.y},m++;for(var n=d.parent;null!=n;)l[m]={x:n.x,y:n.y},m++,n=n.parent;l.reverse(),b.callback(l)}if(void 0===e[j+"_"+k])for(var o=0;o<c.length;o++)if(a[k][j]===c[o]){var p=i(b,j,k,d,h);void 0===p.list?(p.list=EasyStar.Node.OPEN_LIST,b.openList.insert(p)):p.list===EasyStar.Node.OPEN_LIST&&d.costSoFar+h<p.costSoFar&&(p.costSoFar=d.costSoFar+h,p.parent=d);break}},i=function(a,b,c,d,e){if(void 0!==a.nodeHash[b+"_"+c])return a.nodeHash[b+"_"+c];var f=j(b,c,a.endX,a.endY);if(null!==d)var g=d.costSoFar+e;else g=f;var h=new EasyStar.Node(d,b,c,g,f);return a.nodeHash[b+"_"+c]=h,h},j=function(a,b,c,d){return Math.floor(Math.abs(b-a)+Math.abs(d-c))}};